{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"bg-green-50\"\n};\nconst _hoisted_2 = {\n  class: \"container m-auto max-w-2xl py-24\"\n};\nconst _hoisted_3 = {\n  class: \"bg-white px-6 py-8 mb-4 shadow-md rounded-md border m-4 md:m-0\"\n};\nconst _hoisted_4 = {\n  class: \"mb-4\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"text-red-500 text-sm\",\n  id: \"usernameError\"\n};\nconst _hoisted_6 = {\n  class: \"mb-4\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"text-red-500 text-sm\",\n  id: \"passwordError\"\n};\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.handleSubmit, [\"prevent\"])\n  }, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", {\n    class: \"text-3xl text-center font-semibold mb-6\"\n  }, \"Sign In\", -1 /* HOISTED */)), _createCommentVNode(\" Username Input \"), _createElementVNode(\"div\", _hoisted_4, [_cache[2] || (_cache[2] = _createElementVNode(\"label\", {\n    for: \"username\",\n    class: \"block text-gray-700 font-bold mb-2\"\n  }, \"Username\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.username = $event),\n    id: \"username\",\n    name: \"username\",\n    class: _normalizeClass([\"border rounded w-full py-2 px-3 mb-2\", {\n      'border-red-500': $setup.errors.username\n    }]),\n    required: \"\",\n    \"aria-describedby\": \"usernameError\"\n  }, null, 2 /* CLASS */), [[_vModelText, $setup.form.username]]), $setup.errors.username ? (_openBlock(), _createElementBlock(\"p\", _hoisted_5, _toDisplayString($setup.errors.username), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Password Input \"), _createElementVNode(\"div\", _hoisted_6, [_cache[3] || (_cache[3] = _createElementVNode(\"label\", {\n    for: \"password\",\n    class: \"block text-gray-700 font-bold mb-2\"\n  }, \"Password\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.password = $event),\n    id: \"password\",\n    name: \"password\",\n    class: _normalizeClass([\"border rounded w-full py-2 px-3 mb-2\", {\n      'border-red-500': $setup.errors.password\n    }]),\n    required: \"\",\n    \"aria-describedby\": \"passwordError\"\n  }, null, 2 /* CLASS */), [[_vModelText, $setup.form.password]]), $setup.errors.password ? (_openBlock(), _createElementBlock(\"p\", _hoisted_7, _toDisplayString($setup.errors.password), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Submit Button \"), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    class: \"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full w-full focus:outline-none focus:shadow-outline\",\n    type: \"submit\",\n    disabled: $setup.loading\n  }, [$setup.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, \"Signing In...\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_10, \"Sign In\"))], 8 /* PROPS */, _hoisted_8)])], 32 /* NEED_HYDRATION */)])])]);\n}","map":{"version":3,"names":["class","key","id","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onSubmit","_withModifiers","$setup","handleSubmit","_createCommentVNode","_hoisted_4","for","type","_cache","$event","form","username","name","_normalizeClass","errors","required","_hoisted_5","_toDisplayString","_hoisted_6","password","_hoisted_7","disabled","loading","_hoisted_9","_hoisted_10","_hoisted_8"],"sources":["F:\\sample\\frontend\\src\\views\\SignInView.vue"],"sourcesContent":["<script setup>\r\nimport { reactive, ref } from \"vue\";\r\nimport axios from \"axios\";  // Use regular axios for now\r\nimport { useToast } from \"vue-toastification\";\r\nimport { useRouter } from 'vue-router';\r\nimport { useAuthStore } from '../stores/auth';\r\n\r\nconst form = reactive({\r\n    username: \"\",\r\n    password: \"\",\r\n});\r\n\r\nconst errors = reactive({});\r\nconst toast = useToast();\r\nconst loading = ref(false);\r\nconst router = useRouter();\r\nconst authStore = useAuthStore();\r\n\r\n// Configure axios defaults\r\naxios.defaults.baseURL = 'http://localhost:8000';\r\naxios.defaults.headers.common['Accept'] = 'application/json';\r\naxios.defaults.headers.common['Content-Type'] = 'application/json';\r\naxios.defaults.withCredentials = true;\r\n\r\nconst handleSubmit = async () => {\r\n    errors.username = \"\";\r\n    errors.password = \"\";\r\n    loading.value = true;\r\n\r\n    try {\r\n        // First, get CSRF cookie\r\n        await axios.get('/sanctum/csrf-cookie');\r\n        console.log('Logging in with credentials:', form); // Add this for debugging\r\n        // Then attempt login\r\n        const response = await axios.post(\"/api/login\", form);\r\n        console.log('Login response:', response.data.token);  // Add this for debugging\r\n        // console.log(response.data)\r\n        router.push({ name: 'dashboard' });\r\n        if (response.data.token) {\r\n            authStore.setToken(response.data.token);\r\n            toast.success(\"Sign In Successful\");\r\n            router.push({ name: 'dashboard' });\r\n        } else {\r\n            throw new Error('No token received');\r\n        }\r\n    } catch (error) {\r\n        console.error('Login error details:', error.response || error);  // Enhanced error logging\r\n        loading.value = false;\r\n        if (error.response?.status === 401) {\r\n            toast.error(\"Invalid credentials\");\r\n        } else {\r\n            toast.error(\"Sign In Failed - Network Error\");\r\n        }\r\n    } finally {\r\n        loading.value = false;\r\n    }\r\n};\r\n</script>\r\n<template>\r\n  <section class=\"bg-green-50\">\r\n    <div class=\"container m-auto max-w-2xl py-24\">\r\n      <div class=\"bg-white px-6 py-8 mb-4 shadow-md rounded-md border m-4 md:m-0\">\r\n        <form @submit.prevent=\"handleSubmit\">\r\n          <h2 class=\"text-3xl text-center font-semibold mb-6\">Sign In</h2>\r\n\r\n          <!-- Username Input -->\r\n          <div class=\"mb-4\">\r\n            <label for=\"username\" class=\"block text-gray-700 font-bold mb-2\">Username</label>\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.username\"\r\n              id=\"username\"\r\n              name=\"username\"\r\n              class=\"border rounded w-full py-2 px-3 mb-2\"\r\n              required\r\n              aria-describedby=\"usernameError\"\r\n              :class=\"{ 'border-red-500': errors.username }\"\r\n            />\r\n            <p v-if=\"errors.username\" class=\"text-red-500 text-sm\" id=\"usernameError\">\r\n              {{ errors.username }}\r\n            </p>\r\n          </div>\r\n\r\n          <!-- Password Input -->\r\n          <div class=\"mb-4\">\r\n            <label for=\"password\" class=\"block text-gray-700 font-bold mb-2\">Password</label>\r\n            <input\r\n              type=\"password\"\r\n              v-model=\"form.password\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              class=\"border rounded w-full py-2 px-3 mb-2\"\r\n              required\r\n              aria-describedby=\"passwordError\"\r\n              :class=\"{ 'border-red-500': errors.password }\"\r\n            />\r\n            <p v-if=\"errors.password\" class=\"text-red-500 text-sm\" id=\"passwordError\">\r\n              {{ errors.password }}\r\n            </p>\r\n          </div>\r\n\r\n          <!-- Submit Button -->\r\n          <div>\r\n            <button\r\n              class=\"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full w-full focus:outline-none focus:shadow-outline\"\r\n              type=\"submit\"\r\n              :disabled=\"loading\"\r\n            >\r\n              <span v-if=\"loading\">Signing In...</span>\r\n              <span v-else>Sign In</span>\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<style scoped>\r\n/* You can add some custom styles here if needed */\r\n</style>\r\n"],"mappings":";;EA2DWA,KAAK,EAAC;AAAa;;EACrBA,KAAK,EAAC;AAAkC;;EACtCA,KAAK,EAAC;AAAgE;;EAKlEA,KAAK,EAAC;AAAM;;EAlE3BC,GAAA;EA8EsCD,KAAK,EAAC,sBAAsB;EAACE,EAAE,EAAC;;;EAMvDF,KAAK,EAAC;AAAM;;EApF3BC,GAAA;EAgGsCD,KAAK,EAAC,sBAAsB;EAACE,EAAE,EAAC;;mBAhGtE;;EAAAD,GAAA;AAAA;;EAAAA,GAAA;AAAA;;uBA2DEE,mBAAA,CAwDU,WAxDVC,UAwDU,GAvDRC,mBAAA,CAsDM,OAtDNC,UAsDM,GArDJD,mBAAA,CAoDM,OApDNE,UAoDM,GAnDJF,mBAAA,CAkDO;IAlDAG,QAAM,EA9DrBC,cAAA,CA8D+BC,MAAA,CAAAC,YAAY;gCACjCN,mBAAA,CAAgE;IAA5DL,KAAK,EAAC;EAAyC,GAAC,SAAO,sBAE3DY,mBAAA,oBAAuB,EACvBP,mBAAA,CAeM,OAfNQ,UAeM,G,0BAdJR,mBAAA,CAAiF;IAA1ES,GAAG,EAAC,UAAU;IAACd,KAAK,EAAC;KAAqC,UAAQ,sB,gBACzEK,mBAAA,CASE;IARAU,IAAI,EAAC,MAAM;IArEzB,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAsEuBP,MAAA,CAAAQ,IAAI,CAACC,QAAQ,GAAAF,MAAA;IACtBf,EAAE,EAAC,UAAU;IACbkB,IAAI,EAAC,UAAU;IACfpB,KAAK,EAzEnBqB,eAAA,EAyEoB,sCAAsC;MAAA,kBAGhBX,MAAA,CAAAY,MAAM,CAACH;IAAQ;IAF3CI,QAAQ,EAAR,EAAQ;IACR,kBAAgB,EAAC;0CALRb,MAAA,CAAAQ,IAAI,CAACC,QAAQ,E,GAQfT,MAAA,CAAAY,MAAM,CAACH,QAAQ,I,cAAxBhB,mBAAA,CAEI,KAFJqB,UAEI,EAAAC,gBAAA,CADCf,MAAA,CAAAY,MAAM,CAACH,QAAQ,oBA/EhCP,mBAAA,e,GAmFUA,mBAAA,oBAAuB,EACvBP,mBAAA,CAeM,OAfNqB,UAeM,G,0BAdJrB,mBAAA,CAAiF;IAA1ES,GAAG,EAAC,UAAU;IAACd,KAAK,EAAC;KAAqC,UAAQ,sB,gBACzEK,mBAAA,CASE;IARAU,IAAI,EAAC,UAAU;IAvF7B,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAwFuBP,MAAA,CAAAQ,IAAI,CAACS,QAAQ,GAAAV,MAAA;IACtBf,EAAE,EAAC,UAAU;IACbkB,IAAI,EAAC,UAAU;IACfpB,KAAK,EA3FnBqB,eAAA,EA2FoB,sCAAsC;MAAA,kBAGhBX,MAAA,CAAAY,MAAM,CAACK;IAAQ;IAF3CJ,QAAQ,EAAR,EAAQ;IACR,kBAAgB,EAAC;0CALRb,MAAA,CAAAQ,IAAI,CAACS,QAAQ,E,GAQfjB,MAAA,CAAAY,MAAM,CAACK,QAAQ,I,cAAxBxB,mBAAA,CAEI,KAFJyB,UAEI,EAAAH,gBAAA,CADCf,MAAA,CAAAY,MAAM,CAACK,QAAQ,oBAjGhCf,mBAAA,e,GAqGUA,mBAAA,mBAAsB,EACtBP,mBAAA,CASM,cARJA,mBAAA,CAOS;IANPL,KAAK,EAAC,4HAA4H;IAClIe,IAAI,EAAC,QAAQ;IACZc,QAAQ,EAAEnB,MAAA,CAAAoB;MAECpB,MAAA,CAAAoB,OAAO,I,cAAnB3B,mBAAA,CAAyC,QA5GvD4B,UAAA,EA4GmC,eAAa,M,cAClC5B,mBAAA,CAA2B,QA7GzC6B,WAAA,EA6G2B,SAAO,G,iBA7GlCC,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}